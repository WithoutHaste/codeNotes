##Building Microservices

Notes from reading "Building Microservices" by Sam Newman.

#Chapter 1: Microservices

Shout out for Eric Evans's "Domain Driven Design": the importance of representing the real world in our code.

Shout out for Alistair Cockburn's Hexagonal Architecture design pattern: guiding us away from layered architectures where business logic can hide.

"Domain driven design. Continuous delivery. On-demand virtualization. Infrastructure automation. Small autonomous teams. Systems at scale. Microservices have emerged from this world."

Microservices are "small, and focused on doing one thing well."

Monolithic codebases generally lose their ideal structures. "Code related to similar functions starts to become spread all over, making fixing bugs or implementations more difficult."
	(I've seen this happen with microservices as well. You can't replace developer discipline with architecture.)
	
"Cohesion - the drive to have related code grouped together...This is reinforced by Robert C. Martin's definition of the Single Responsibility Principle, which states gather together those things that change for the same reason, and separate those things that change for different reasons."

Follow the Single Responsibility Principle by aligning service boundaries with business boundaries. "Making it obvious where code lives for a given piece of functionality."

"How small is small? Jon Eaves characterizes a microservice as something that could be rewritten in two weeks, a rule of thumb that makes sense for his particular context."

"As you get smaller, the benefits around interdependence increase. But so too does some of the complexity that emerges from having more and more moving parts...As you get better at handling this complexity, you can strive for smaller and smaller services."

Rule of thumb is to deploy one service to one machine (or virtual machine). "Although this solution can add some overhead, the resulting simplicity makes our distributed system much easier to reason about."

"All communication between the services themselves are via network calls, to enforce separation between the services and avoid the perils of tight coupling."

Services:
- can be changed independently of each other
- can be deployed without requiring consumers to change

"If there is too much sharing, our consuming services become coupled to our internal representations. This decreases our autonomy."

"Our service exposes an API (application programming interface), and collaborating services communicate with us via those APIs."

"The golden rule: can you make a change to a service and deploy it by itself without changing anything else?"

"With a system composed of multiple, collaborating services, we can decide to use different technologies inside each one."

Regarding using multiple technology stacks: "Just like many things concerning microservices, it's all about finding the right balance."

Example of the scope of microservices: "Gilt, an online fashion retailer, ...today has over 450 microservices, each one running on multiple separate machines."

(A lot of this chapter went straight into the "Strengths" of microservices section)

Indication of microservice size: "How often have you deleted more than a hundred lines of code in a single day and not worried too much about it? With microservices often being of similar size, the barriers to rewriting  or removing services entirely are very low...When a codebase is just a few hundred lines long, it is difficult for people to become emotionally attached to it, and the cost of replacing it is pretty small."

"There is a lack of good consensus on how to do SOA well. In my opinion, much of the industry has failed to look holistically enough at the problem and present a compelling alternative to the narrative set out by various vendors in this space...Many of the problems laid at the door of SOA are actually problems with things like communication protocols (e.g. SOAP), vendor middleware, a lack of guidance about service granularity, or the wrong guidance on picking places to split your system...Much of the conventional wisdom around SOA doesn't hlep you understand how to split something big into something small. It doesn't talk about how big is too big."

"The microservice approach has emerged fro real-world use, taking our better understanding of systems and architecture to do SOA well."
